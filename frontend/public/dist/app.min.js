angular.module("imsFrontendApp",["app.home","app.home.nolog","app.home.withlog","app.loginservice","app.startloading","app.home.startpage","app.navbar","ngRoute"]).config(function(o){});var app;!function(o){var e;!function(o){"use strict";var e=function(){function o(){}return o}();o.CurrentUser=e;var t=function(){function o(o,e){this.$localStorage=o,this.$http=e,this.informationLoaded=!1,this.loggedUserInfo=void 0,console.log("Creating StartLoadingService...")}return o.prototype.sleep=function(o){for(var e=(new Date).getTime();e+o>=(new Date).getTime(););this.informationLoaded=!0},o.prototype.loadUserInfo=function(o){var e=this,t="/api/account/user?username="+this.$localStorage.username;console.log(t),this.$http.get(t).then(function(o){e.loggedUserInfo=o.data,e.sleep(2e3)},function(o){console.log("Error",o)})},o}();o.StartLoadingService=t,angular.module("app.startloading",[]).service("StartLoadingService",["$localStorage","$http",t])}(e=o.startloading||(o.startloading={}))}(app||(app={}));var app;!function(o){var e;!function(o){"use strict";var e=function(){function o(o){this.token=o}return o}();o.ResponseToken=e;var t=function(){function o(o,e,t){this.$localStorage=o,this.$cookies=e,this.$window=t,this.isLogged=!1,this.loggedUser=void 0,console.log("Creating LoginService..."),this.isLogged=this.checkIfLogged()}return o.prototype.getIsLogged=function(){return this.isLogged},o.prototype.checkIfLogged=function(){var o=this.$localStorage.isLogged,e=this.$localStorage.username,t=this.$cookies.get("Bearer");return null==t||null==o||null==e?(console.log("Not logged "),!1):1==o&&this.checkTokenSync(t)},o.prototype.checkTokenSync=function(o){if(null==o)return!1;var e=new XMLHttpRequest,t="/api/authentication/validate";return e.open("POST",t,!1),e.setRequestHeader("Content-Type","application/txt"),e.send(this.$cookies.get("Bearer")),200==e.status},o.prototype.login=function(o){var e=JSON.stringify(o),t=new XMLHttpRequest,n="/api/authentication/auth";if(t.open("POST",n,!1),t.setRequestHeader("Content-Type","application/json"),console.log("Logging in...",e),t.send(e),200!=t.status)return t.status;var i=JSON.parse(t.response);return this.$cookies.put("Bearer",i.token),this.isLogged=!0,this.$localStorage.isLogged=!0,this.loggedUser=o.username,this.$localStorage.username=o.username,console.log(o.username),t.status},o.prototype.logout=function(){this.$cookies.remove("Bearer"),this.$localStorage.isLogged=void 0,this.$localStorage.username=void 0,this.$window.location.href="/"},o}();o.LoginService=t,angular.module("app.loginservice",["ngStorage","ngCookies"]).service("LoginService",["$localStorage","$cookies","$window",t])}(e=o.loginservice||(o.loginservice={}))}(app||(app={}));var app;!function(o){var e;!function(o){"use strict";var e=function(){function o(o,e,t){this.$scope=o,this.$cookies=e,this.LoginService=t}return o}();o.HomeCtrl=e,angular.module("app.home",["ngRoute","ngCookies","app.loginservice"]).config(function(o){o.when("/",{templateUrl:"../../views/home/home.html",controller:e,controllerAs:"homeCtrl"})})}(e=o.home||(o.home={}))}(app||(app={}));var app;!function(o){var e;!function(o){var e;!function(o){"use strict";var e=function(){function o(o,e){this.username=o,this.password=e}return o}();o.LoggingUser=e;var t=function(){function o(o,e,t){this.LoginService=o,this.$window=e,this.growl=t,this.usernameLogin="",this.passwordLogin=""}return o.prototype.login=function(){var o=new e(this.usernameLogin,this.passwordLogin);console.log(o);var t=this.LoginService.login(o);console.log("Result of login is: ",t),200!=t&&(400==t&&this.growl.error("Invalid username or password!"),401==t&&this.growl.error("Your account has not been activated!"),this.usernameLogin="")},o}();o.HomeNoLogCtrl=t,angular.module("app.home.nolog",["app.loginservice","angularSpinner","angular-growl"]).directive("homeNoLogDirective",function(){return{templateUrl:"../../views/home/home_no_login.html",controller:t,controllerAs:"homeNoLogCtrl"}})}(e=o.nolog||(o.nolog={}))}(e=o.home||(o.home={}))}(app||(app={}));var app;!function(o){var e;!function(o){var e;!function(o){"use strict";var e=function(){function o(o,e,t){this.LoginService=o,this.StartLoadingService=e,this.$window=t,this.StartLoadingService.informationLoaded||(console.log("Loading user information..."),this.StartLoadingService.loadUserInfo(o.loggedUser))}return o}();o.HomeWithLogCtrl=e,angular.module("app.home.withlog",["app.loginservice","app.startloading","angularSpinner"]).directive("homeWithLogDirective",function(){return{templateUrl:"../../views/home/home_with_login.html",controller:e,controllerAs:"homeWithLogCtrl"}})}(e=o.withlog||(o.withlog={}))}(e=o.home||(o.home={}))}(app||(app={}));var app;!function(o){var e;!function(o){"use strict";var e=function(){function o(o,e){this.StartLoadingService=o,this.LoginService=e,this.activePage=void 0,this.username=void 0,this.username=this.StartLoadingService.loggedUserInfo.username,this.activePage=window.location.href}return o.prototype.logout=function(){this.LoginService.logout()},o}();o.NavbarCtrl=e,angular.module("app.navbar",["app.startloading","app.loginservice"]).directive("navbarDirective",function(){return{templateUrl:"../../views/navbar/navbar.html",controller:e,controllerAs:"navbarCtrl"}})}(e=o.navbar||(o.navbar={}))}(app||(app={}));var app;!function(o){var e;!function(o){var e;!function(o){"use strict";var e=function(){function o(o,e,t){this.LoginService=o,this.StartLoadingService=e,this.$window=t}return o}();o.StartPageCtrl=e,angular.module("app.home.startpage",["app.loginservice","app.startloading","angularSpinner"]).directive("startPageDirective",function(){return{templateUrl:"../../views/startPage/startPage.html",controller:e,controllerAs:"startPageCtrl"}})}(e=o.withlog||(o.withlog={}))}(e=o.home||(o.home={}))}(app||(app={}));
//# sourceMappingURL=app.min.js.map
